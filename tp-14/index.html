<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Lista de Contactos - DOM y JavaScript</title>
    <!-- Bootstrap 5.3.2 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .contacto-item {
            transition: all 0.3s ease;
        }

        .contacto-item:hover {
            background-color: #f8f9fa;
        }

        .star-fav {
            cursor: pointer;
            color: #ccc;
            font-size: 1.2rem;
        }

        .star-fav.is-fav {
            color: #ffc107;
            /* Amarillo Bootstrap */
        }
    </style>
</head>

<body>
    <div class="container my-1 my-sm-2 my-md-4 my-lg-5">
        <h1>Lista de Contactos</h1>
        <div class="card shadow-sm">
            <div class="card-body">

                <!-- Controles de Lista -->
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h2>Contactos</h2>
                    <div class="d-flex gap-2">
                        <div class="dropdown">
                            <button class="btn btn-outline-secondary dropdown-toggle" type="button"
                                data-bs-toggle="dropdown" aria-expanded="false">
                                Ordenar por
                            </button>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="#" onclick="cambiarOrden('nombre')">Nombre</a></li>
                                <li><a class="dropdown-item" href="#" onclick="cambiarOrden('apellido')">Apellido</a>
                                </li>
                            </ul>
                        </div>
                        <button class="btn btn-outline-warning" id="btn-toggle-favs" onclick="toggleMostrarFavoritos()">
                            â˜† Favoritos
                        </button>
                    </div>
                </div>

                <!-- Lista -->
                <ul class="list-group mb-4" id="lista-contactos">
                    <!-- Los contactos se inyectarÃ¡n aquÃ­ -->
                </ul>

                <hr class="hr">

                <h2>Nuevo Contacto</h2>
                <form id="form-producto">
                    <div class="row g-2 mb-3">
                        <div class="col-md">
                            <input type="text" class="form-control" name="nombre" id="input-nombre" placeholder="Nombre"
                                aria-label="Nombre" required>
                        </div>
                        <div class="col-md">
                            <input type="text" class="form-control" name="apellido" id="input-apellido"
                                placeholder="Apellido" aria-label="Apellido" required>
                        </div>
                        <div class="col-md">
                            <input type="tel" class="form-control" name="telefono" id="input-telefono"
                                placeholder="TelÃ©fono" aria-label="TelÃ©fono" required>
                        </div>
                    </div>
                    <button class="btn btn-primary w-100" type="submit">Agregar Contacto</button>
                </form>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script type="text/javascript">
        // Estado de la aplicaciÃ³n
        let contactos = [
            { id: 1, nombre: 'Juan', apellido: 'Perez', telefono: '123-456', favorito: false },
            { id: 2, nombre: 'Ana', apellido: 'Gomez', telefono: '987-654', favorito: true },
        ];

        let criterioOrden = 'apellido'; // 'nombre' o 'apellido'
        let mostrarSoloFavoritos = false;

        /**
         * toggleFavorito: Cambia el estado de favorito de un contacto
         */
        function toggleFavorito(id) {
            const contacto = contactos.find(c => c.id === id);
            if (contacto) {
                contacto.favorito = !contacto.favorito;
                mostrarListado();
            }
        }

        /**
         * toggleMostrarFavoritos: Alterna el filtro de visualizaciÃ³n
         */
        function toggleMostrarFavoritos() {
            mostrarSoloFavoritos = !mostrarSoloFavoritos;
            const btn = document.getElementById('btn-toggle-favs');
            if (mostrarSoloFavoritos) {
                btn.classList.add('active', 'btn-warning');
                btn.classList.remove('btn-outline-warning');
                btn.innerText = "â˜… Favoritos";
            } else {
                btn.classList.remove('active', 'btn-warning');
                btn.classList.add('btn-outline-warning');
                btn.innerText = "â˜† Favoritos";
            }
            mostrarListado();
        }

        /**
         * cambiarOrden: Cambia el criterio de ordenamiento
         */
        function cambiarOrden(criterio) {
            criterioOrden = criterio;
            mostrarListado();
        }

        /**
         * agregarContacto: Agrega un nuevo contacto al array
         */
        function agregarContacto(nombre, apellido, telefono) {
            const nuevoContacto = {
                id: Date.now(), // ID Ãºnico simple basado en timestamp
                nombre: nombre,
                apellido: apellido,
                telefono: telefono,
                favorito: false
            };
            contactos.push(nuevoContacto);
            mostrarListado();
        }

        /**
         * mostrarListado: Renderiza la lista basada en el estado actual (filtros y orden)
         */
        function mostrarListado() {
            const listaDOM = document.getElementById('lista-contactos');
            listaDOM.innerHTML = '';

            // 1. Filtrar
            let contactosAVisualizar = contactos;
            if (mostrarSoloFavoritos) {
                contactosAVisualizar = contactos.filter(c => c.favorito);
            }

            // 2. Ordenar
            contactosAVisualizar.sort((a, b) => {
                const valorA = a[criterioOrden].toLowerCase();
                const valorB = b[criterioOrden].toLowerCase();
                if (valorA < valorB) return -1;
                if (valorA > valorB) return 1;
                return 0;
            });

            // 3. Renderizar
            if (contactosAVisualizar.length === 0) {
                listaDOM.innerHTML = '<li class="list-group-item text-center text-muted">No hay contactos para mostrar</li>';
                return;
            }

            contactosAVisualizar.forEach(contacto => {
                const li = document.createElement('li');
                li.className = 'list-group-item d-flex justify-content-between align-items-center contacto-item';

                // Icono estrella (lleno si es favorito, vacÃ­o si no)
                const estrellaClase = contacto.favorito ? 'is-fav' : '';
                const estrellaSimbolo = contacto.favorito ? 'â˜…' : 'â˜†';

                li.innerHTML = `
                    <div class="d-flex align-items-center">
                        <span class="star-fav me-3 ${estrellaClase}" onclick="toggleFavorito(${contacto.id})">
                            ${estrellaSimbolo}
                        </span>
                        <div>
                            <div class="fw-bold">${contacto.apellido}, ${contacto.nombre}</div>
                            <div class="text-muted small">ðŸ“ž ${contacto.telefono}</div>
                        </div>
                    </div>
                `;
                listaDOM.appendChild(li);
            });
        }

        function handlerFormulario(e) {
            e.preventDefault();
            const inputNombre = e.target.querySelector('#input-nombre');
            const inputApellido = e.target.querySelector('#input-apellido');
            const inputTelefono = e.target.querySelector('#input-telefono');

            const nombre = inputNombre.value;
            const apellido = inputApellido.value;
            const telefono = inputTelefono.value;

            if (nombre && apellido && telefono) {
                agregarContacto(nombre, apellido, telefono);

                // Limpiar inputs
                inputNombre.value = "";
                inputApellido.value = "";
                inputTelefono.value = "";

                // Poner foco en nombre para carga rÃ¡pida
                inputNombre.focus();
            }
        }

        // InicializaciÃ³n
        document.querySelector('form').addEventListener('submit', handlerFormulario);
        mostrarListado(); // Mostrar lista inicial
    </script>
</body>

</html>